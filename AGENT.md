# AGENT.md - 알바 로그 (Alba Log) 프로젝트 기획서

## 1. 프로젝트명

**알바 로그 (Alba Log)**

## 2. Agent의 목표 (앱의 핵심 목적)

본 Agent(앱)의 목표는 편의점 근무자들의 파편화된 업무 방식을 통합하고 자동화하여, 업무 효율성을 높이고 인적 오류(Human Error)를 최소화하는 것이다. 근무자는 '알바 로그'를 통해 **"무엇을 해야 할지"** 명확히 인지하고, 관리자는 **"업무가 어떻게 처리되었는지"** 쉽게 파악할 수 있는 환경을 제공한다.

## 3. 타겟 사용자

* **주요 사용자:** 편의점 아르바이트생 (스태프)
* **보조 사용자:** 편의점 점주 및 매니저

## 4. 해결하고자 하는 문제 (Problem)

1.  **구두/메모 기반 인수인계:** 중요한 업무 내용이 누락되거나 잘못 전달될 위험이 높다.
2.  **핵심 업무 망각:** 유통기한 확인, 재고 관리, 특정 시간대 청소 등 반복적이지만 중요한 업무를 잊기 쉽다.
3.  **비공식적 소통 채널:** 카카오톡 등 개인 메신저를 통한 공지와 근무 교대 요청으로 인해 업무와 사생활의 경계가 모호해진다.
4.  **수동적인 업무 관리:** 모든 업무가 근무자의 기억과 책임감에 의존하여 체계적인 관리가 어렵다.

## 5. Agent의 핵심 기능 (Solution)

이러한 문제를 해결하기 위해 Agent는 다음 4가지 핵심 기능을 수행한다.

1.  **스마트 인수인계 (Smart Handover)**
    * **수행 작업:** 퇴근하는 근무자가 체크리스트 기반의 인수인계서를 작성하여 다음 근무자에게 앱으로 전달한다.
    * **트리거:** 근무 교대 시간
    * **결과:** 업무 누락 방지 및 책임 소재 명확화

2.  **유통기한 관리자 (Expiration Date Manager)**
    * **수행 작업:** 근무자가 상품 바코드를 스캔하여 유통기한을 등록하면, 폐기 임박 시 자동으로 알림을 보낸다.
    * **트리거:** 시스템에 등록된 날짜 도래
    * **결과:** 폐기 상품 사전 관리, 손실 감소

3.  **중앙 공지 시스템 (Centralized Notice)**
    * **수행 작업:** 점주/매니저가 작성한 공지사항을 모든 근무자에게 푸시 알림으로 전송하고, 수신 여부를 확인한다.
    * **트리거:** 관리자의 공지사항 작성
    * **결과:** 중요 정보의 신속하고 정확한 전파

4.  **근무 교대 도우미 (Shift Swap Assistant)**
    * **수행 작업:** 근무자가 교대(대타)를 원하는 시간대를 앱에 올리면, 다른 근무자들이 신청할 수 있는 매칭 시스템을 제공한다.
    * **트리거:** 근무자의 교대 요청
    * **결과:** 관리자의 개입을 최소화하는 효율적인 스케줄 조정

## 6. 기술 스택 (예상)

* **Platform:** Android
* **IDE:** Android Studio
* **Language:** Kotlin (or Java)
* **Database:** Room (로컬), Firebase (클라우드)
* **Architecture:** MVVM (Model-View-ViewModel)

## 7. 개발 로그

### 2025-10-28: '유통기한 관리자' 기능 추가 및 안정화

'유통기한 관리자' 화면에서 상품을 추가하는 기능 구현 중 발생한 앱 강제 종료 문제를 해결하고 기능을 안정화했습니다.

**주요 해결 과정:**

1.  **문제 현상:** '유통기한 관리자' 화면에서 '+' 버튼을 눌러 상품 정보를 입력하고 '저장' 버튼을 클릭하면, 데이터베이스에 접근하는 시점에서 앱이 강제 종료됨.
2.  **디버깅 여정:**
    *   초기에는 **Firebase 연동 문제**로 추정하여, Firestore 보안 규칙, 안드로이드 인터넷 권한, Gradle 플러그인 설정, Firebase 수동 초기화 코드 등 서버 및 클라이언트의 모든 연동 설정을 점검하고 수정했습니다.
    *   또한, 앱 실행 환경 문제일 가능성을 고려하여 **Google Play 서비스가 포함된 안정적인 버전의 안드로이드 에뮬레이터(API 34)**를 새로 구성하여 테스트 환경을 통일했습니다.
    *   위 모든 조치에도 불구하고 문제가 해결되지 않아, **Logcat 오류 로그**를 정밀 분석했습니다.
3.  **최종 원인 발견:** Logcat 분석 결과, 문제의 근본 원인은 Firebase 연동이 아닌 **Jetpack Compose UI 코드의 호환성 문제**로 밝혀졌습니다. `ExpirationDateManagerScreen.kt` 파일 내에서, 클릭 가능한 아이콘을 구현할 때 `Icon` 컴포저블에 `Modifier.clickable`을 직접 사용한 것이 최신 Compose 라이브러리의 내부 정책과 충돌하여 `IllegalArgumentException`을 발생시키고 있었습니다.
4.  **최종 해결:** Compose 라이브러리의 권장 방식에 따라, 문제가 발생한 `Icon`을 `IconButton`으로 감싸도록 코드를 수정하여 UI 렌더링 충돌을 해결하고 앱의 강제 종료 현상을 완전히 수정했습니다.

**결과:**

이제 '유통기한 관리자' 기능은 안정적으로 작동하며, 새 상품을 Firestore 데이터베이스에 성공적으로 추가할 수 있습니다.
